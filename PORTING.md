VST 3.0 has quite a few changes from VST 2.x, but if you add `Require Import VST.floyd.compat.` to the top of your file, existing proofs will mostly work. However, there are a few things that cannot be made backwards-compatible. Here are some tips on making the minimum necessary changes to port your proofs to 3.0.

* The scope `logic` no longer exists, and has been replaced by the Iris scope `I`, which is open by default. Remove `Open Scope logic` and `%logic` throughout.
* The implicit arguments of almost every definition have changed, so references to `@data_at`, `@semax`, etc. will break. We strongly recommend naming implicit arguments explicitly instead (e.g., `data_at(cs := cs)` instead of `@data_at cs`).
* `semax` also takes an extra explicit argument, an invariant mask `E`. This is automatically instantiated by `semax_body`, but it will affect the statement of lemmas that are stated directly on `semax`. For almost all purposes, you can use the default value `⊤`.
* Assertions with explicit type annotations of `environ -> mpred` should be changed to `assert`. More generally, the transition between `assert`s and `mpred`s is not as automatic as in VST 2.x, and you may run into trouble with proofs that rely heavily on automatic lifting.
* The `Espec`/`OracleKind` mechanism has been refactored. `Existing Instance NullExtension.Espec` is no longer necessary to state `semax_prog` lemmas, and should be removed.
* `mpred`s are not extensional by default: i.e., you cannot prove `P = Q` by proving `P |-- Q` and `Q |-- P`. You can, however, prove `P ⊣⊢ Q`, which can be given to `rewrite` and generally functions the same as equality in most cases. If you really want equality rather than equivalence, you can prove it by rewriting with equalities, and many useful lemmas hav already been proved as equalities.
* Proofs that rely on rewriting with `sepcon_assoc` and `sepcon_comm` may break, for several reasons: most notably, `*` is now right-associative instead of left-associative, and several tactics now associate this way by default. The best way to handle these proofs is to use Iris Proof Mode, which you can still use in compatibility mode. It should also still be possible to do these proofs with rewrites, but you may have to adjust their order and direction.
* `start_function` no longer preserves the names of variables from single-element `WITH` clauses. This shows up most commonly in proving `main` functions, where the globals `gv` will instead be named `a`. You can fix this by adding `rename a into gv.` This is probably a bug and may be fixed in future versions.
* Coq sometimes has trouble inferring the type of `funspec`s. You can fix this by adding a type annotation as appropriate (`: funspec`, `: ident * funspec`, etc.).
* When a postcondition has multiple existentials, the order in which `normalize` and `entailer` rearrange them is sometimes different from 2.x. You may find that you need to swap the order of two successive `Exists` tactics.
* `Funspec_old_Notation` is now somewhat unreliable. In the worst case, functions declared with it may cause `start_function` to run forever. We strongly recommend updating to the new, more convenient funspec notation (using `PARAMS` instead of `LOCAL` in the function precondition).

If you encounter a porting problem you're unsure how to solve, or a bug in the new version, please contact [mansky1@uic.edu](mailto:mansky1@uic.edu).
